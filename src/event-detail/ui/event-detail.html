<div ng-if="eventIdIsInvalid">
  <div class="page-header">
    <h1>Pagina niet gevonden</h1>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <p>Deze pagina kon niet gevonden worden.</p>
    </div>
  </div>
</div>

<div ng-if="!finishedLoading()">
  <p class="title"><span class="placeholder-title"></span></p>
  <p class="text-center"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i><span class="sr-only">Aan het laden...</span></p>
</div>

<div ng-if="finishedLoading()" class="event-detail">
  <h1 class="title" ng-bind="::event.name"></h1>
  <div class="row">
    <div class="col-sm-3 col-sm-push-9">
      <div class="list-group" ng-if="::permissions">
        <button ng-if="::permissions.editing"
                class="list-group-item"
                type="button"
                ng-click="openEditPage()"><i class="fa fa-pencil" aria-hidden="true"></i>  Bewerken</button>
        <button ng-if="::permissions.duplication"
                class="list-group-item"
                type="button"
                ui-sref='duplication.event(::{id: event.id})'><i class="fa fa-files-o" aria-hidden="true"></i>  KopiÃ«ren en aanpassen</button>
        <button ng-if="::permissions.editing"
                class="list-group-item"
                href="#"
                ng-click="deleteEvent()"><i class="fa fa-trash" aria-hidden="true"></i>  Verwijderen</button>
        <udb-moderation-offer ng-if="::moderationPermission" class="list-group-item moderation-detail" offer-id="{{::event['@id']}}" continue="true"></udb-moderation-offer>
      </div>
    </div>
    <div class="col-sm-9 col-sm-pull-3">
      <ul class="nav nav-tabs">
        <li ng-repeat="tab in tabs" ng-class="{active: isTabActive(tab.id)}" role="tab">
          <a ng-click="makeTabActive(tab.id)" role="tab" ng-bind="tab.header" href="#"></a>
        </li>
      </ul>

      <div class="tab-pane" role="tabpanel" ng-show="isTabActive('data')">
          <table class="table udb3-data-table">
            <colgroup>
              <col style="width:20%"/>
              <col style="width:80%"/>
            </colgroup>
            <tbody>
              <tr>
                <td><span class="row-label">Titel</span></td>
                <td>{{::event.name}}</td>
              </tr>
              <tr>
                <td><span class="row-label">Type</span></td>
                <td>{{::event.type.label}}</td>
              </tr>
              <tr ng-if="::event.audience.audienceType !== 'everyone'">
                <td><span class="row-label">Toegang</span></td>
                <td>{{::translateAudience(event.audience.audienceType)}}
                <udb-event-cultuurkuur-component event="event" permission="::permissions.editing" ></udb-event-cultuurkuur-component></td>
              </tr>
              <tr>
                <td>
                  <span class="row-label">Labels</span>
                </td>
                <td>
                  <p>
                    <udb-label-select labels="::event.labels"
                                    label-added="labelAdded(label)"
                                    label-removed="labelRemoved(label)">
                    </udb-label-select>
                  </p>
                  <p ng-if="labelResponse === 'error'" class="alert alert-danger">
                    Het toevoegen van het label '{{labelsError.name}}' is niet gelukt.
                  </p>
                  <p ng-if="labelResponse === 'success'" class="alert alert-success">
                    Het label '{{addedLabel}}' werd succesvol toegevoegd.
                  </p>
                  <p ng-if="labelResponse === 'unlabelError'" class="alert alert-danger">
                    <span ng-bind="labelsError"></span>
                  </p>
                </td>
              </tr>
              <tr ng-class="::{muted: isEmpty(event.description)}">
                <td><span class="row-label">Beschrijving</span></td>
                <td ng-if="::(!isEmpty(event.description))">
                  <div ng-bind-html="::event.description" class="event-detail-description"></div>
                </td>
                <td ng-if="::(isEmpty(event.description))">
                  Geen beschrijving
                </td>
              </tr>
              <tr>
                <td><span class="row-label">Waar</span></td>
                <td ng-show="::event.location.url"><a ui-sref="split.footer.place-preview({id: event.location.id})">{{eventLocation(event)}}</a></td>
                <td ng-hide="::event.location.url">
                  {{::event.location.name.nl}},
                  {{::event.location.address.streetAddress}},
                  {{::event.location.address.postalCode}}
                  {{::event.location.address.addressLocality}}
                </td>
              </tr>
              <tr>
                <td><span class="row-label">Wanneer</span></td>
                <td>
                    <span ng-if="::(!isEmpty(calendarSummary))" ng-bind-html="calendarSummary"></span>
                    <span class="text-muted" ng-if="::(isEmpty(calendarSummary))">Probleem bij het ophalen van de kalenderinformatie</span>
                </td>
              </tr>
              <tr ng-class="::{muted: (!event.organizer)}">
                <td><span class="row-label">Organisatie</span></td>
                <td ng-if="::event.organizer">{{::event.organizer.name}}</td>
                <td ng-if="::(!event.organizer)">
                  Geen organisatie-informatie
                </td>
              </tr>
              <tr class="rv-event-info-price" ng-class="::{muted: !event.priceInfo.length}">
                <td><span class="row-label">Prijs</span></td>
                <td ng-if="::event.priceInfo.length">
                  <table class="table table-bordered event-detail-price-table">
                    <tr ng-repeat="priceInfo in ::event.priceInfo">
                      <td>{{priceInfo.name}}</td>
                      <td>
                        <span ng-if="priceInfo.price == 0">
                          Gratis
                        </span>
                        <span ng-if="::priceInfo.price != 0">
                          {{priceInfo.price | currency}} euro
                        </span>
                      </td>
                    </tr>
                  </table>
                </td>
                <td ng-if="::(event.priceInfo.length == 0)">
                  Geen prijsinformatie
                </td>
              </tr>
            </tbody>
            <tbody ng-if="::(!isEmpty(event.bookingInfo))" udb-booking-info-detail="::event.bookingInfo"></tbody>
            <tbody udb-contact-point-detail="::event.contactPoint"></tbody>
            <tbody>
              <tr  ng-class="::{muted: noAgeInfo}">
                <td><span class="row-label">Geschikt voor</span></td>
                <td>
                  <span ng-if="::!allAges && !noAgeInfo">{{event.typicalAgeRange}}</span>
                  <span ng-if="::allAges && !noAgeInfo">Alle leeftijden</span>
                  <span ng-if="noAgeInfo">Geen leeftijdsinformatie</span>
                </td>

              </tr>
            </tbody>
            <tbody udb-image-detail="::event.mediaObject" image="::event.image"></tbody>
          </table>
      </div>

      <div role="tabpanel" class="tab-pane" ng-show="isTabActive('history')">
        <div class="timeline">
          <p ng-show="!eventHistory" class="text-center">
            <i class="fa fa-circle-o-notch fa-spin fa-fw"></i><span class="sr-only">Aan het laden...</span>
          </p>
          <div ng-if="::eventHistory">
            <dl ng-repeat="eventAction in ::eventHistory track by $index">
              <dt ng-bind="::eventAction.date | date:'dd/MM/yyyy H:mm'"></dt>
              <dd>
                <span class="author" ng-if="eventAction.author" ng-bind="::eventAction.author"></span>
                <br ng-if="::eventAction.author"/>
                <span class="description" ng-bind="::eventAction.description"></span>
              </dd>
            </dl>
          </div>
        </div>
      </div>

      <div class="tab-pane" role="tabpanel" ng-show="isTabActive('publication')">
        <table class="table udb3-data-table">
          <colgroup>
            <col style="width:20%"/>
            <col style="width:80%"/>
          </colgroup>
          <tbody udb-workflow-status="::event">
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
