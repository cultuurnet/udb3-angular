
<div class="modal-header">
  <button type="button" class="close" ng-click="cancel()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  <h4 class="modal-title" ng-hide="organizersFound">Nieuwe organisatie toevoegen</h4>
  <h4 class="modal-title" ng-show="organizersFound">Vermijd dubbel werk</h4>
</div>
<div class="modal-body">

  <section ng-hide="organizersFound">
    <form name="organizerForm" class="organizer-form">
      <p class="alert alert-info" ng-bind="'UNIQUE_ORGANIZER_NOTICE' | translate"></p>
      <div class="row">
        <div class="col-sm-12 col-md-8">
          <div class="form-group has-feedback"
               ng-class="{'has-warning' : organizersWebsiteFound || organizerForm.website.$error.required }">
            <label class="control-label" for="organizer-website">Website</label>
            <input type="url"
                   id="organizer-website"
                   name="website"
                   class="form-control"
                   ng-model-options="{ debounce: 300 }"
                   ng-model="newOrganizer.website"
                   aria-describedby="organizer-website-status"
                   ng-change="validateWebsite()"
                   autocomplete="off"
                   required>
            <span class="fa fa-circle-o-notch fa-spin form-control-feedback" ng-show="showWebsiteValidation" aria-hidden="true"></span>
            <span id="organizer-website-status" class="sr-only">(warning)</span>
          </div>
        </div>


        <div class="col-sm-12">
          <p class="alert alert-warning" ng-show="organizersWebsiteFound">
            Dit adres is al gebruikt door de organisatie '<span ng-bind="firstOrganizerFound.name"></span>'.
            Geef een unieke website of
            <a ng-click="selectOrganizer(firstOrganizerFound)" class="alert-link" href="#">
              gebruik <span ng-bind="firstOrganizerFound.name"></span> als organisatie
            </a>.
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-12 col-md-8">
          <div class="form-group" ng-class="{'has-error' : showValidation && organizerForm.name.$error.required }">
            <label>Naam</label>
            <input type="text"
                   name="name"
                   class="form-control"
                   ng-model="newOrganizer.name"
                   ng-change="updateName()"
                   required>
            <p class="help-block">De officiÃ«le publieke naam van de organisatie.</p>
            <span class="help-block" ng-show="showValidation && organizerForm.name.$error.required">
          Gelieve een naam in te vullen
        </span>
          </div>
        </div>
      </div>
    </form>

    <udb-organizer-address address="newOrganizer.address"
                           on-update="validateAddress(error)"></udb-organizer-address>
    <udb-organizer-contact contact="newOrganizer.contact"
                           on-update="validateContact(error)"></udb-organizer-contact>

  </section>

  <section ng-show="organizersFound">

    <div class="alert alert-info">
      <p>
         Ben je zeker dat je "<span ng-bind="newOrganizer.name"></span>" wil toevoegen als organisatie? Dubbele invoer
         van organisaties is niet toegelaten.
      </p>
    </div>
    <p>We vonden deze gelijkaardige items:</p>
    <table class="table">
      <tr ng-repeat="organizer in organizers" udb-organizer="organizer">
        <td colspan="2" ng-show="fetching">
          <i class="fa fa-circle-o-notch fa-spin"></i>
        </td>
        <td ng-hide="fetching">
          <strong ng-bind="::organizer.name"></strong>
          , <span ng-bind="::organizer.addresses[0].streetAddress"></span>
          , <span ng-bind="::organizer.addresses[0].postalCode"></span>
           <span ng-bind="::organizer.addresses[0].addressLocality"></span>
        </td>
        <td ng-hide="fetching"><a class="btn btn-default" ng-click="selectOrganizer(organizer)">Selecteren</a></td>
      </tr>
      <tr>
        <td>
          Jij voerde in:
          <br/>
          <strong ng-bind="newOrganizer.name"></strong>
          , <span ng-bind="newOrganizer.street"></span>
           <span ng-bind="newOrganizer.number"></span>
           <span ng-bind="newOrganizer.postalCode"></span>
           <span ng-bind="newOrganizer.city"></span>
        </td>
        <td><a class="btn btn-default" ng-click="saveOrganizer()">Toch invoeren</a></td>
      </tr>
    </table>

  </section>

  <div class="alert alert-danger" ng-show="saveError">
    Er ging iets fout tijdens het opslaan van je organisatie.
  </div>
  <div class="alert alert-danger" ng-show="error">
    <p ng-show="addressError">Gelieve een geldig adres in te vullen.<br /></p>
    <p ng-show="contactError">Gelieve alle contactinfo correct in te vullen.<br /></p>
  </div>

</div>
<div class="modal-footer" ng-hide="organizersFound">
  <button type="button" class="btn btn-default" ng-click="cancel()">Sluiten</button>
  <button type="button"
          class="btn btn-primary organisator-toevoegen-bewaren"
          ng-disabled="disableSubmit"
          ng-click="validateNewOrganizer()">
    Bewaren <i class="fa fa-circle-o-notch fa-spin" ng-show="saving"></i>
  </button>
</div>
